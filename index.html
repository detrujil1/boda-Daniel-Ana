<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Boda — Invitación estilo TikTok (claro + música)</title>
  <meta name="description" content="Invitación de boda de Daniel  &  Ana — detalles, galería y confirmación.">
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Fraunces:wght@600;700&family=Manrope:wght@300;400;600;700&display=swap"
    rel="stylesheet">

  <meta name="theme-color" content="#fffaf2">
  <link rel="icon" href="videoframe_11125.png" type="image/png">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/dress-code.css">
  <!-- Estilos críticos pequeños para accesibilidad/skip-link -->
  <style>
    .skip-link {
      position: absolute;
      left: -999px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden
    }

    .skip-link:focus {
      position: static !important;
      left: 0;
      top: 0;
      width: auto;
      height: auto;
      padding: .5rem 1rem;
      background: #fff;
      color: #222;
      border: 1px solid #ddd;
      border-radius: 6px;
      z-index: 9999
    }

    .story {
      outline: none
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#reel">Saltar al contenido</a>
  <noscript>
    <div
      style="background:#fff7;position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:1rem;z-index:9999">
      <div
        style="max-width:520px;background:#fff;border:1px solid #eee;padding:1.2rem;border-radius:10px;text-align:center;font-family:Montserrat,system-ui,Segoe UI,Roboto,Arial,sans-serif">
        <strong>JavaScript está desactivado.</strong>
        <p>Activa JavaScript para poder interactuar con la invitación (reproducir música, ver galería y confirmar
          asistencia).</p>
        <a href="#" onclick="this.parentElement.parentElement.style.display='none';return false"
          style="color:#6a3be6">Cerrar</a>
      </div>
    </div>
  </noscript>
  <main class="reel" id="reel">
    <!-- (Decoración derecha removida para una experiencia más limpia) -->

    <!-- ====== PANTALLA 1 (Hero) ====== -->
    <section class="story s1" role="region" aria-label="Pantalla principal" tabindex="0" data-bg="fondo.jpg">
      <div class="bg" id="bg1"></div>
      <div class="overlay"></div>
      <div class="ring-photo" aria-hidden="true"></div>
      <!-- SVG animated wedding rings -->
      <div class="wedding-rings" aria-hidden="true">
        <svg viewBox="0 0 120 120" class="wedding-rings-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0%" stop-color="#f6d55c" />
              <stop offset="100%" stop-color="#f08a24" />
            </linearGradient>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="3" result="blur" />
              <feMerge>
                <feMergeNode in="blur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
          </defs>
          <!-- larger gold ring -->
          <g class="ring ring-1" transform="translate(10,8)">
            <circle cx="50" cy="50" r="32" fill="none" stroke="url(#g1)" stroke-width="6" stroke-linecap="round"
              filter="url(#glow)" />
          </g>
          <!-- smaller silver ring, offset -->
          <g class="ring ring-2" transform="translate(28,30)">
            <circle cx="50" cy="50" r="24" fill="none" stroke="#f3efe8" stroke-width="4" stroke-linecap="round"
              opacity="0.98" />
          </g>
          <!-- sparkle accent -->
          <g class="sparkle" transform="translate(86,24)">
            <path d="M0 0 L4 6 L10 8 L4 10 L0 16 L-2 10 L-8 8 L-2 6 Z" fill="#fff9e6" opacity="0.95" />
          </g>
        </svg>
      </div>

      <div class="topbar">
        <span class="badge"><span class="avatar"></span> @Daniel&Ana · Invitación</span>
        <span class="badge">♪ Love Theme · Piano</span>
      </div>

      <div class="disc" id="disc" aria-hidden="true"></div>

      <!-- Hero names in their own card above the details card -->
      <div class="names-card" aria-hidden="false">
        <h1 class="names" id="names">Daniel &amp; Ana Milena</h1>
      </div>

      <div class="card">
        <div class="subtitle">¡Nos casamos!</div>
        <p class="invite-text">y tenemos el honor de invitarte a celebrar nuestro matrimonio</p>
        <div class="decor-line" aria-hidden="true"></div>
        <p class="invite-note">Hay momentos en la vida que son especiales por sí solos, pero al compartirlos se
          convierten en inolvidables.</p>

      </div>

      <div id="petals"></div>
      <div class="footer">Desliza hacia arriba ↑</div>
    </section>

    <!-- ====== PANTALLA 2 (Detalles - estilo diario) ====== -->
    <section class="story s2" role="region" aria-label="Detalles del día" tabindex="0"
      data-bg="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1600&auto=format&fit=crop">
      <div class="bg" id="bg2"
        style="background-image: url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1600&auto=format&fit=crop');">
      </div>
      <div class="overlay"></div>

      <div class="card" aria-live="polite">
        <h2 class="names" style="font-size:clamp(28px,6vw,54px);margin:.1em 0 .4em;text-align:center">Detalles del día
        </h2>
        <p class="invite-note" style="text-align:center;max-width:720px;margin:0.2em auto 1em">"El amor es la fuerza mas
          humilde pero la mas poderosa de que dispone el mundo." Fuiste parte de nuestra historia, y por eso queremos
          compartir este gran día junto a ustedes.</p>
        <h3 class="names" style="font-size:clamp(28px,6vw,54px);margin:.1em 0 .4em;text-align:center">Faltan</h3>
        <!-- Countdown (se mantiene para la lógica existente) -->
        <div style="text-align:center;margin:8px 0 14px">
          <div class="countdown cd-flat" id="countdown" aria-live="polite">
            <div class="unit">
              <strong id="d">0</strong>
              <span>DÍAS</span>
            </div>
            <div class="unit">
              <strong id="h">0</strong>
              <span>HORAS</span>
            </div>
            <div class="unit">
              <strong id="m">0</strong>
              <span>MINUTOS</span>
            </div>
            <div class="unit">
              <strong id="s">0</strong>
              <span>SEGUNDOS</span>
            </div>
          </div>



        </div>

        <!-- Grid de detalles similar a index2 -->

      </div>
      <div class="footer">Hecho con ♥ — #BodaDanielAna</div>
    </section>



    <!-- ====== PANTALLA 3 (Línea de tiempo) ====== -->
    <section id="timeline" class="story s3" role="region" aria-label="Línea de tiempo" tabindex="0">
      <div class="bg" id="timeline-bg"></div>
      <div class="overlay"></div>

      <div class="timeline-container" id="timeline-container">
        <header>
          <div class="names" aria-label="Daniel y Ana">Daniel &amp; Ana</div>
          <svg class="flourish" viewBox="0 0 200 24" aria-hidden="true" focusable="false">
            <path d="M2 12 C 34 2, 66 2, 98 12 S 162 22, 198 12" fill="none" stroke="url(#fGrad)" stroke-width="1.8"
              stroke-linecap="round" />
            <defs>
              <linearGradient id="fGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="var(--brand)" />
                <stop offset="60%" stop-color="var(--gold-300)" />
                <stop offset="100%" stop-color="var(--gold-500)" />
              </linearGradient>
            </defs>
          </svg>
          <div class="date" aria-label="8 de noviembre de 2025">8 de noviembre de 2025</div>
          <div class="place">Iglesia Inmaculada Concepción de Suba, Bogotá</div>
        </header>

        <div class="fireflies" id="timeline-fireflies" aria-hidden="true"></div>

        <section class="timeline" aria-labelledby="tl-title">
          <h2 id="tl-title" class="visually-hidden">Línea de tiempo</h2>
          <div class="path-wrap" id="timeline-pathWrap">
            <svg id="timeline-tl-svg" role="img" aria-label="Línea del tiempo">
              <defs>
                <linearGradient id="brandGoldGrad" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stop-color="#f4d17c" />
                  <stop offset="100%" stop-color="#d4a017" />
                </linearGradient>

                <filter id="tlGlow" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur" />
                  <feMerge>
                    <feMergeNode in="blur" />
                    <feMergeNode in="SourceGraphic" />
                  </feMerge>
                </filter>
              </defs>

              <!-- La curva se recalcula por JS para que nunca se salga -->
              <path id="timeline-tl-path" class="path" d="M 0 0 C 200 80, 60 180, 320 260 S 140 420, 480 520" />
              <path id="timeline-tl-shimmer" class="shimmer" d="M 0 0 C 200 80, 60 180, 320 260 S 140 420, 480 520" />
              <circle id="timeline-glint" class="glint" r="4.5" cx="0" cy="0"></circle>
            </svg>

            <ol class="nodes" id="timeline-nodes"></ol>
          </div>
        </section>
      </div>
    </section>


    <!-- ====== PANTALLA 3 (Línea de tiempo) ====== inicio -->
    <!-- ====== PANTALLA 4 (Código de Vestimenta) ====== -->
    <section class="story dress-code-story" role="region" aria-label="Código de vestimenta" tabindex="0">
      <div class="bg" id="bg4"></div>
      <div class="overlay"></div>

      <div class="dress-code-container">
        <!-- Header -->
        <header class="dress-code-header">
          <div class="badge">
            <span>💒</span>
            Detalles importantes
          </div>
          <h1 class="names custom-script">Daniel & Ana</h1>
          <div class="decor-line"></div>
        </header>

        <!-- Grid horizontal responsive -->
        <div class="dress-code-grid">

          <!-- 1) CÓDIGO DE VESTIMENTA -->
          <div class="dress-content" aria-labelledby="dress-title">


            <!-- SVG de traje y vestido -->
            <div class="dress-icon-container">
              <svg class="dress-icon" viewBox="0 0 120 120" role="img" aria-labelledby="icoDress">
                <title id="icoDress">Código de vestimenta</title>
                <!-- Tux -->
                <g transform="translate(6,2)">
                  <path d="M20 20 h36 l8 26 -16 50 h-20 l-16 -50 z" fill="var(--muted)" />
                  <path d="M38 20 v12 l-6 10 8 8 8-8 -6-10 v-12 z" fill="#ffffff" />
                  <circle cx="42" cy="44" r="2" fill="var(--accent)" />
                  <circle cx="42" cy="52" r="2" fill="var(--accent)" />
                </g>
                <!-- Dress -->
                <g transform="translate(62,12)">
                  <path d="M16 8 l6 10 h-12 z" fill="var(--accent)" />
                  <path d="M10 20 q16 10 20 40 l-30 0 q4-30 10-40 z" fill="var(--accent-2)" />
                  <path d="M9 20 h22" stroke="var(--accent)" stroke-width="2" />
                </g>
              </svg>
            </div>


            <span class="dress-badge">Dress Code</span>
            <h2 id="dress-title" class="dress-title">Formal Elegante</h2>
            <p class="dress-copy">Traje o esmoquin para ellos; Colores sugeridos: <strong>verdes</strong>,
              <strong>dorados</strong> y tonos neutros.</p>
            <ul class="dress-list">
              <li>Evitar tenis, jeans y prendas muy casuales</li>
              <li>Se recomienda abrigo ligero (noche fresca)</li>
              <li>Evitar blanco y marfil (reservado para la novia)</li>
            </ul>
            <!-- Letrero principal -->
            <div class="best-look-banner"
              style="text-align: center; margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #f6d55c, #f08a24); border-radius: 15px; box-shadow: 0 4px 15px rgba(240, 138, 36, 0.3); transform: rotate(-2deg); margin-bottom: 25px;">
              <h2 class="best-look-text"
                style="margin: 0; font-family: 'Great Vibes', cursive; font-size: clamp(24px, 5vw, 36px); color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); font-weight: 600; letter-spacing: 1px;">
                ¡Usa tu mejor look!</h2>
            </div>
          </div>

          <!-- 2) LLUVIA DE SOBRES -->
          <div class="envelope-hero" aria-labelledby="gift-title">
            <div class="envelope-hero">
              <div class="envelope-icon-container">
                <svg class="envelope-main-icon" viewBox="0 0 120 120" role="img" aria-labelledby="icoGift">
                  <title id="icoGift">Lluvia de sobres</title>
                  <rect x="20" y="42" width="80" height="54" rx="8" fill="var(--sunflower)" />
                  <path d="M20 50 l40 28 40-28" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round"
                    stroke-linejoin="round" />
                  <path d="M20 42 l40 28 40-28" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" />
                  <circle cx="60" cy="65" r="4" fill="var(--accent)" opacity="0.7" />
                </svg>
              </div>

              <div class="envelope-content">
                <span class="envelope-badge">Lluvia de Sobres</span>
                <h2 id="gift-title" class="envelope-title">Tu presencia es el mejor regalo</h2>
                <p class="envelope-copy">El mejor regalo es que estes presente en este dia tan esperado si deseas hacer
                  un obsequio tenemos <em>lluvia de sobres</em> el día del evento. ¡Gracias por ayudarnos a construir
                  nuestro hogar!</p>
                <div class="envelope-divider"></div>
              </div>

              <!-- Animación de sobres -->
              <div class="envelope-rain" aria-hidden="true"></div>
            </div>
          </div>

          <!-- 3) CONFIRMACIÓN DE ASISTENCIA -->
          <div class="rsvp-hero" aria-labelledby="rsvp-title">
            <div class="rsvp-hero">
              <div class="rsvp-icon-container">
                <svg class="rsvp-icon" viewBox="0 0 120 120" role="img" aria-labelledby="icoRSVP">
                  <title id="icoRSVP">Confirmación de asistencia</title>
                  <rect x="18" y="28" width="84" height="64" rx="10" fill="var(--accent)" />
                  <rect x="18" y="40" width="84" height="10" fill="var(--muted)" />
                  <circle cx="40" cy="72" r="10" fill="#fff" />
                  <path d="M36 72 l3 4 6-8" stroke="var(--accent)" stroke-width="4" fill="none" stroke-linecap="round"
                    stroke-linejoin="round" />
                  <rect x="42" y="24" width="8" height="12" rx="4" fill="#fff" />
                  <rect x="70" y="24" width="8" height="12" rx="4" fill="#fff" />
                </svg>
              </div>

              <div class="rsvp-content">
                <h2 id="rsvp-title" class="rsvp-title">Confírmanos antes del <span class="rsvp-deadline">20 de octubre
                    del 2025</span></h2>
                <p class="rsvp-copy">Envíanos un mensaje por WhatsApp para confirmar tu asistencia y recibir todas las
                  actualizaciones de la boda.</p>

                <a href="#" class="link-rsvp whatsapp-btn" onclick="openWhatsAppMessage('573046411126'); return false;">
                  Confirmar por WhatsApp
                </a>


                <p class="rsvp-contact">Teléfono: <span id="phoneDisplay">+57 3046411126</span></p>
              </div>
            </div>
          </div>

        </div>
        <!-- ====== PANTALLA 4 (Línea de tiempo) ====== fin -->


        <!-- ====== PANTALLA 5 (Galería de Recuerdos) ====== -->
        <section class="story s3" role="region" aria-label="Galería de recuerdos" tabindex="0">
          <div class="bg" id="bg-sunflowers"></div>
          <div class="overlay"></div>
          <div class="card" style="background:rgba(255,255,255,0.96);box-shadow:0 8px 32px rgba(167,123,255,0.10);">
            <h2 class="names" style="font-size:clamp(28px,6vw,54px);margin:.1em 0 .4em;color:var(--accent);">Nuestros
              recuerdos</h2>
            <!-- La hoja de estilos para la galería no debe cargarse desde "img/"; si existe crear "css/gallery.css" y enlazarla en <head>. -->
            <!-- Contenedor para la animación de girasoles en la base -->
            <div id="sunflowers-anim" aria-hidden="true"></div>
            <div class="gallery" id="gallery">
              <div class="gallery-item">
                <img src="120880544_1141956966201903_1127993670349141576_n.jpg" alt="Momentos felices 1" loading="lazy"
                  srcset="120880544_1141956966201903_1127993670349141576_n.jpg 1x">
                <div class="caption">Un instante inolvidable</div>
              </div>
              <div class="gallery-item">
                <img src="199618397_175408174538428_8647630428475852208_n.jpg" alt="Momentos felices 2" loading="lazy"
                  srcset="199618397_175408174538428_8647630428475852208_n.jpg 1x">
                <div class="caption">Nuestra historia juntos</div>
              </div>
              <div class="gallery-item">
                <img src="241392355_328758222338794_2247522739049370118_n.jpg" alt="Momentos felices 3" loading="lazy"
                  srcset="241392355_328758222338794_2247522739049370118_n.jpg 1x">
                <div class="caption">Risas y amor</div>
              </div>
              <div class="gallery-item">
                <img src="429807309_1709088092918707_7396777558563963057_n.jpg" alt="Momentos felices 4" loading="lazy"
                  srcset="429807309_1709088092918707_7396777558563963057_n.jpg 1x">
                <div class="caption">Juntos por siempre</div>
              </div>
              <div class="gallery-item">
                <img src="64239880_478194192984357_1302299422067402605_n.jpg" alt="Momentos felices 5" loading="lazy"
                  srcset="64239880_478194192984357_1302299422067402605_n.jpg 1x">
                <div class="caption">Un nuevo capítulo</div>
              </div>
            </div>
            <!-- input para subir imagen de girasol (persistida en localStorage) -->
            <input id="sunflower-input" type="file" accept="image/*" style="display:none">
            <div style="font-size:1.1em;color:var(--accent);margin-top:10px;font-family:'Fraunces',serif;">Desliza para
              ver
              más recuerdos ↓</div>
          </div>
          <!-- Lightbox modal para ver imágenes grandes -->
          <div id="lightbox" class="lightbox" aria-hidden="true">
            <button class="lightbox-close" aria-label="Cerrar">✕</button>
            <img class="lightbox-img" alt="">
            <div class="lightbox-caption"></div>
          </div>
          <!-- RSVP modal -->
          <div id="rsvp-modal" class="rsvp-modal" aria-hidden="true">
            <div class="rsvp-panel">
              <button class="rsvp-close" aria-label="Cerrar invitación">✕</button>
              <h3 style="margin-top:0;font-family:'Fraunces',serif">Confirmar asistencia</h3>
              <form id="rsvp-form">
                <label>Nombre completo<br><input name="name" required placeholder="Juan Pérez" /></label>
                <label>Correo (opcional)<br><input name="email" type="email" placeholder="correo@ejemplo.com" /></label>
                <fieldset style="border:none;padding:0;margin:8px 0">
                  <legend>¿Asistirás?</legend>
                  <label><input type="radio" name="attend" value="yes" checked /> Sí</label>
                  <label style="margin-left:12px"><input type="radio" name="attend" value="no" /> No</label>
                </fieldset>
                <label>Adultos<br><input name="adults" type="number" min="0" value="1" /></label>
                <label>Niños<br><input name="kids" type="number" min="0" value="0" /></label>
                <label>Mensaje (opcional)<br><textarea name="note" rows="3"
                    placeholder="Algún comentario"></textarea></label>
                <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
                  <button type="submit" class="btn btn--brand">Confirmar</button>
                  <button type="button" id="rsvp-export" class="btn btn--ghost">Exportar CSV</button>
                </div>
              </form>
            </div>
          </div>
          <div class="footer">Hecho con ♥ — #BodaDanielAna</div>
        </section>
  </main>



  <!-- Audio controlado por los botones -->
  <audio id="bg-music" preload="auto" loop>
    <source src="il divo hasta mi final VIDEO OFICIAL HD - Machisga.mp3" type="audio/mpeg">
  </audio>

  <!-- Pantalla de bienvenida para reproducir la música -->
  <div id="welcome-overlay" class="welcome">
    <div class="welcome__panel">
      <h2>¡Bienvenido!</h2>
      <p>Para vivir la experiencia completa, por favor reproduce la canción antes de ver la invitación.</p>

      <button id="start-music-btn" class="btn-play" aria-label="Reproducir canción y ver invitación"
        title="Reproducir canción y ver invitación">
        <svg class="play-icon" width="26" height="26" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true" focusable="false">
          <path d="M5 3v18l15-9L5 3z" fill="currentColor" />
        </svg>
        <span class="visually-hidden">Reproducir canción y ver invitación</span>
      </button>

      <div class="welcome__song">Canción: Hasta mi final — Il Divo</div>
    </div>
  </div>


  <!-- Cargamos la lógica separada para mantener index.html limpio -->
  <!-- Optional backgrounds config (pattern taken from index2) -->
  <script>
    // Si quieres personalizar los fondos por pantalla (prioridad móvil), edita estas URLs.
    // Puedes usar imágenes locales como "assets/hero.jpg" o URLs remotas (Unsplash optimizadas para móvil).
    window.INVITE = window.INVITE || {};
    window.INVITE.backgrounds = window.INVITE.backgrounds || [
      'https://source.unsplash.com/900x1600/?wedding,flowers',
      'https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1600&auto=format&fit=crop',
      'https://i.pinimg.com/736x/02/47/a8/0247a81d747cc95b0ba5cb6ee57474cb.jpg',
      'https://i.pinimg.com/1200x/23/4d/5b/234d5bfdf3b5539f943997432b182b94.jpg',
      'https://source.unsplash.com/900x1600/?wedding,sunset',
      'https://source.unsplash.com/900x1600/?wedding,floral'
    ];
  </script>
  <script src="js/app.js" defer></script>
  <script src="js/dress-code.js" defer></script>

  <script>
    // Construye los emojis por código y arma el mensaje (sin depender del encoding del archivo)
    function e(cp) { return String.fromCodePoint(cp); }

    function buildRSVPMessage() {
      const L1 = `¡Hola Daniel y Ana! ${e(0x1F470)} ${e(0x1F935)}`;
      const L2 = `${e(0x2728)} Confirmo mi asistencia a su boda el 8 de noviembre de 2025 ${e(0x2728)}`;
      const L4 = `${e(0x1F389)} ¡Estoy muy emocionado/a de celebrar este día con ustedes!`;
      const L5 = `${e(0x26EA)}\uFE0F ¡Nos vemos en la iglesia! ${e(0x1F495)}`;
      return [L1, '', L2, '', L4, '', L5].join('\n');
    }

    function openWhatsAppMessage(phone) {
      const text = encodeURIComponent(buildRSVPMessage());
      const url1 = `https://wa.me/${phone}?text=${text}`;
      const url2 = `https://api.whatsapp.com/send?phone=${phone}&text=${text}`; // fallback
      const w = window.open(url1, '_blank');
      setTimeout(() => { try { if (!w || w.closed) window.open(url2, '_blank'); } catch (e) { window.open(url2, '_blank'); } }, 400);
    }
  </script>


</body>

</html>